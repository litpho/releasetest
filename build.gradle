buildscript {
    repositories {
        maven {
            url 'https://plugins.gradle.org/m2/'
        }
    }
    dependencies {
        classpath 'net.researchgate:gradle-release:2.4.0'
    }
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    apply plugin: 'net.researchgate.release'

    release {
        buildTasks = ['build']
    }

    sourceCompatibility = 1.8

    dependencies {
        compile 'org.slf4j:slf4j-api:1.7.21'
    }

    afterReleaseBuild.dependsOn publish

    publishing {
        repositories {
            maven {
                if (project.version.endsWith('-SNAPSHOT')) {
                    url "${nexusSnapshotRepository}"
                } else {
                    url "${nexusReleaseRepository}"
                }
                credentials {
                    username "${nexusUsername}"
                    password "${nexusPassword}"
                }
            }
        }

        publications {
            plugin(MavenPublication) { artifact(jar)  }
        }
    }
}
